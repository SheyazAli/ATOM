<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Verify OTP | ATOM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #fff;
      color: #111;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .otp-wrapper {
      width: 100%;
      max-width: 420px;
      text-align: center;
      padding: 20px;
    }

    .otp-title {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .otp-desc {
      font-size: 15px;
      color: #666;
      margin-bottom: 35px;
    }

    .otp-inputs {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 30px;
    }

    .otp-inputs input {
      width: 54px;
      height: 56px;
      border-radius: 12px;
      border: 1px solid #e0e0e0;
      background: #fff5f5;
      font-size: 20px;
      text-align: center;
    }

    .otp-inputs input:focus {
      outline: none;
      border-color: #198754;
      box-shadow: none;
    }

    .btn-submit {
      background: #4f8556;
      color: #fff;
      border: none;
      width: 100%;
      padding: 16px;
      border-radius: 14px;
      font-size: 16px;
      font-weight: 500;
      margin-bottom: 16px;
    }

    .btn-submit:hover {
      background: #3f6f46;
    }

    .btn-resend {
      background: #f3f3f3;
      color: #444;
      border: none;
      padding: 12px 26px;
      border-radius: 12px;
      font-size: 14px;
    }

    .btn-resend:hover {
      background: #e6e6e6;
    }
  </style>
</head>

<body>

<div class="otp-wrapper">

  <div class="otp-title">Verify with OTP</div>

  <div class="otp-desc">
    We have sent a verification code to your email / phone number.
  </div>

  <% if (typeof error !== 'undefined') { %>
    <div class="alert alert-danger py-2">
      <%= error %>
    </div>
  <% } %>

  <% if (typeof success !== 'undefined') { %>
    <div class="alert alert-success py-2">
      <%= success %>
    </div>
  <% } %>

  <!-- VERIFY OTP -->
  <form action="/user/verify-otp" method="POST">
    <input type="hidden" name="otp" id="otpHidden">

    <div class="otp-inputs">
      <input type="text" maxlength="1" class="otp-digit">
      <input type="text" maxlength="1" class="otp-digit">
      <input type="text" maxlength="1" class="otp-digit">
      <input type="text" maxlength="1" class="otp-digit">
      <input type="text" maxlength="1" class="otp-digit">
      <input type="text" maxlength="1" class="otp-digit">
    </div>

    <button type="submit" class="btn-submit">
      Submit OTP
    </button>
  </form>

  <!-- RESEND OTP -->
  <form action="/user/resend-otp" method="POST">
    <button type="submit" class="btn-resend">
      Resend OTP
    </button>
  </form>

</div>

<script>
  const inputs = document.querySelectorAll('.otp-digit');
  const hiddenInput = document.getElementById('otpHidden');

  inputs.forEach((input, index) => {
    input.addEventListener('input', () => {
      input.value = input.value.replace(/[^0-9]/g, '');

      if (input.value && index < inputs.length - 1) {
        inputs[index + 1].focus();
      }

      hiddenInput.value = Array.from(inputs)
        .map(i => i.value)
        .join('');
    });

    input.addEventListener('keydown', (e) => {
      if (e.key === 'Backspace' && !input.value && index > 0) {
        inputs[index - 1].focus();
      }
    });
  });
</script>

</body>
</html>
